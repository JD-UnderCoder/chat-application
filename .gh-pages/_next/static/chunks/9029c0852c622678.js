(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16518,e=>{"use strict";var t=e.i(43476),a=e.i(9375),s=e.i(59141),i=e.i(18566),l=e.i(71645);e.i(51718);var n=e.i(18357);e.i(36180);var r=e.i(98925);function c(){let[e,a]=l.useState("signin"),[i,c]=l.useState(""),[u,d]=l.useState(""),[o,m]=l.useState(""),[h,p]=l.useState(!1),[x,g]=l.useState(null);async function v(t){t.preventDefault(),g(null),p(!0);try{if("signup"===e){let e=await (0,n.createUserWithEmailAndPassword)(s.auth,i,u);o&&await (0,n.updateProfile)(e.user,{displayName:o}),await (0,r.setDoc)((0,r.doc)(s.db,"users",e.user.uid),{uid:e.user.uid,email:i,displayName:o||i.split("@")[0],photoURL:e.user.photoURL||null,lastSeen:Date.now(),createdAt:(0,r.serverTimestamp)()})}else await (0,n.signInWithEmailAndPassword)(s.auth,i,u)}catch(e){g(e instanceof Error?e.message:"Something went wrong")}finally{p(!1)}}return(0,t.jsxs)("div",{className:"card card-hover w-full max-w-md p-6",children:[(0,t.jsxs)("div",{className:"mb-6 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-emerald-400 to-emerald-600 text-white grid place-items-center shadow",children:(0,t.jsx)("span",{className:"text-sm font-bold",children:"BC"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Welcome"}),(0,t.jsx)("p",{className:"text-sm text-[var(--color-muted)]",children:"Sign in to your account"})]})]}),(0,t.jsxs)("form",{onSubmit:v,className:"space-y-3",children:["signup"===e&&(0,t.jsx)("input",{className:"input",placeholder:"Full name",value:o,onChange:e=>m(e.target.value)}),(0,t.jsx)("input",{className:"input",placeholder:"Email",type:"email",value:i,onChange:e=>c(e.target.value)}),(0,t.jsx)("input",{className:"input",placeholder:"Password",type:"password",value:u,onChange:e=>d(e.target.value)}),x&&(0,t.jsx)("p",{className:"text-sm text-red-400",children:x}),(0,t.jsx)("button",{className:"btn w-full",disabled:h,children:h?"Please wait...":"signup"===e?"Create account":"Sign in"})]}),(0,t.jsx)("div",{className:"mt-4 text-center text-sm text-[var(--color-muted)]",children:"signup"===e?(0,t.jsx)("button",{className:"btn-ghost",onClick:()=>a("signin"),children:"Have an account? Sign in"}):(0,t.jsx)("button",{className:"btn-ghost",onClick:()=>a("signup"),children:"New here? Create an account"})})]})}function u(){let[e,n]=(0,a.useAuthState)(s.auth),u=(0,i.useRouter)();return(0,l.useEffect)(()=>{!n&&e&&((0,r.setDoc)((0,r.doc)(s.db,"users",e.uid),{uid:e.uid,email:e.email,displayName:e.displayName||e.email?.split("@")[0],photoURL:e.photoURL||null,lastSeen:Date.now(),updatedAt:(0,r.serverTimestamp)()},{merge:!0}),u.replace("/chat"))},[e,n,u]),(0,t.jsx)("div",{className:"min-h-dvh grid place-items-center p-6",children:(0,t.jsx)(c,{})})}e.s(["default",()=>u],16518)}]);