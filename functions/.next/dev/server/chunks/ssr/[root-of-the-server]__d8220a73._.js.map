{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/JD/business-chat/src/lib/firebase.ts"],"sourcesContent":["import { initializeApp, getApps } from \"firebase/app\";\r\nimport { getAuth } from \"firebase/auth\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\n\r\n// Firebase Web App configuration (public keys)\r\n// Provided by user; these are safe to include in client code.\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyChtoK_4wBcsLZiaXF-s_ksQBwxHPfZhs4\",\r\n  authDomain: \"chat-application-1d2dc.firebaseapp.com\",\r\n  projectId: \"chat-application-1d2dc\",\r\n  storageBucket: \"chat-application-1d2dc.firebasestorage.app\",\r\n  messagingSenderId: \"611424434957\",\r\n  appId: \"1:611424434957:web:5b6e6044f296ceadf5ce44\",\r\n};\r\n\r\nconst app = getApps().length ? getApps()[0] : initializeApp(firebaseConfig);\r\n\r\nexport const auth = getAuth(app);\r\nexport const db = getFirestore(app);\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,+CAA+C;AAC/C,8DAA8D;AAC9D,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;AACT;AAEA,MAAM,MAAM,IAAA,2KAAO,IAAG,MAAM,GAAG,IAAA,2KAAO,GAAE,CAAC,EAAE,GAAG,IAAA,iLAAa,EAAC;AAErD,MAAM,OAAO,IAAA,6KAAO,EAAC;AACrB,MAAM,KAAK,IAAA,iLAAY,EAAC","debugId":null}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/JD/business-chat/src/components/Avatar.tsx"],"sourcesContent":["import * as React from \"react\";\r\n\r\nexport function Avatar({ name, src, size = 36 }: { name?: string; src?: string; size?: number }) {\r\n  const initials = (name || \"?\")\r\n    .split(\" \")\r\n    .map((n) => n[0])\r\n    .slice(0, 2)\r\n    .join(\"\")\r\n    .toUpperCase();\r\n  return (\r\n    <div\r\n      className=\"rounded-xl bg-gradient-to-br from-emerald-400 to-emerald-600 text-white grid place-items-center shadow\"\r\n      style={{ width: size, height: size }}\r\n    >\r\n      {src ? (\r\n        // eslint-disable-next-line @next/next/no-img-element\r\n        <img\r\n          src={src}\r\n          alt={name || \"avatar\"}\r\n          className=\"w-full h-full object-cover rounded-xl\"\r\n          loading=\"lazy\"\r\n        />\r\n      ) : (\r\n        <span className=\"text-xs font-semibold\">{initials}</span>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;;AAEO,SAAS,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,OAAO,EAAE,EAAkD;IAC7F,MAAM,WAAW,CAAC,QAAQ,GAAG,EAC1B,KAAK,CAAC,KACN,GAAG,CAAC,CAAC,IAAM,CAAC,CAAC,EAAE,EACf,KAAK,CAAC,GAAG,GACT,IAAI,CAAC,IACL,WAAW;IACd,qBACE,8OAAC;QACC,WAAU;QACV,OAAO;YAAE,OAAO;YAAM,QAAQ;QAAK;kBAElC,MACC,qDAAqD;sBACrD,8OAAC;YACC,KAAK;YACL,KAAK,QAAQ;YACb,WAAU;YACV,SAAQ;;;;;iCAGV,8OAAC;YAAK,WAAU;sBAAyB;;;;;;;;;;;AAIjD","debugId":null}},
    {"offset": {"line": 192, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/JD/business-chat/src/lib/conversations.ts"],"sourcesContent":["export function conversationIdFromUids(a: string, b: string) {\r\n  return [a, b].sort().join(\"__\");\r\n}"],"names":[],"mappings":";;;;AAAO,SAAS,uBAAuB,CAAS,EAAE,CAAS;IACzD,OAAO;QAAC;QAAG;KAAE,CAAC,IAAI,GAAG,IAAI,CAAC;AAC5B","debugId":null}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/JD/business-chat/src/components/Sidebar.tsx"],"sourcesContent":["\"use client\";\r\nimport * as React from \"react\";\r\nimport { collection, onSnapshot, orderBy, query, doc, setDoc } from \"firebase/firestore\";\r\nimport { db } from \"@/lib/firebase\";\r\nimport { useAuthState } from \"react-firebase-hooks/auth\";\r\nimport { auth } from \"@/lib/firebase\";\r\nimport { Avatar } from \"./Avatar\";\r\nimport { conversationIdFromUids } from \"@/lib/conversations\";\r\n\r\nexport function Sidebar({ onSelect, selectedUid }: { onSelect: (uid: string) => void; selectedUid?: string | null }) {\r\n  const [user] = useAuthState(auth);\r\n  const [users, setUsers] = React.useState<{ uid: string; email: string; displayName: string; photoURL?: string; lastSeen?: number; }[]>([]);\r\nconst [now, setNow] = React.useState<number>(0);\r\n\r\n  React.useEffect(() => {\r\n    const q = query(collection(db, \"users\"), orderBy(\"lastSeen\", \"desc\"));\r\n    const unsub = onSnapshot(q, (snap) => {\r\nsetUsers(snap.docs.map((d) => d.data() as { uid: string; email: string; displayName: string; photoURL?: string; lastSeen?: number; }));\r\n    });\r\n    return () => unsub();\r\n  }, []);\r\n\r\nReact.useEffect(() => {\r\n    setNow(Date.now());\r\n    const id = setInterval(() => setNow(Date.now()), 10_000);\r\n    return () => clearInterval(id);\r\n  }, []);\r\n\r\n  async function startChat(otherUid: string) {\r\n    if (!user?.uid || otherUid === user.uid) return;\r\n    const cid = conversationIdFromUids(user.uid, otherUid);\r\n    await setDoc(doc(db, \"conversations\", cid), { members: [user.uid, otherUid] }, { merge: true });\r\n    onSelect(otherUid);\r\n  }\r\n\r\n  function isOnline(ls?: number) {\r\n    return !!ls && now - ls < 60_000; // last minute\r\n  }\r\n\r\n  return (\r\n    <aside className=\"hidden md:flex md:w-80 shrink-0 flex-col gap-3 p-4 border-r border-white/5 bg-black/20\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-sm font-semibold uppercase tracking-wide text-[var(--color-muted)]\">Contacts</h3>\r\n      </div>\r\n      <div className=\"space-y-2 overflow-y-auto pr-2 scroll-gradient\">\r\n        {users.map((u) => (\r\n          <button\r\n            key={u.uid}\r\n            onClick={() => startChat(u.uid)}\r\n            className={`w-full flex items-center gap-3 rounded-xl px-3 py-2 text-left transition-colors ${selectedUid===u.uid?\"bg-white/10\":\"hover:bg-white/5\"}`}\r\n          >\r\n            <div className=\"relative\">\r\n              <Avatar name={u.displayName} src={u.photoURL || undefined} />\r\n              <span className={`absolute -bottom-0.5 -right-0.5 h-2.5 w-2.5 rounded-full ring-2 ring-[var(--background)] ${isOnline(u.lastSeen)?\"bg-emerald-400\":\"bg-zinc-500\"}`} />\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <div className=\"truncate text-sm font-medium\">{u.displayName || u.email}</div>\r\n              <div className=\"truncate text-xs text-[var(--color-muted)]\">{u.email}</div>\r\n            </div>\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </aside>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AAPA;;;;;;;;;AASO,SAAS,QAAQ,EAAE,QAAQ,EAAE,WAAW,EAAoE;IACjH,MAAM,CAAC,KAAK,GAAG,IAAA,0LAAY,EAAC,8HAAI;IAChC,MAAM,CAAC,OAAO,SAAS,GAAG,iNAAc,CAA+F,EAAE;IAC3I,MAAM,CAAC,KAAK,OAAO,GAAG,iNAAc,CAAS;IAE3C,kNAAe,CAAC;QACd,MAAM,IAAI,IAAA,0KAAK,EAAC,IAAA,+KAAU,EAAC,4HAAE,EAAE,UAAU,IAAA,4KAAO,EAAC,YAAY;QAC7D,MAAM,QAAQ,IAAA,+KAAU,EAAC,GAAG,CAAC;YACjC,SAAS,KAAK,IAAI,CAAC,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI;QAChC;QACA,OAAO,IAAM;IACf,GAAG,EAAE;IAEP,kNAAe,CAAC;QACZ,OAAO,KAAK,GAAG;QACf,MAAM,KAAK,YAAY,IAAM,OAAO,KAAK,GAAG,KAAK;QACjD,OAAO,IAAM,cAAc;IAC7B,GAAG,EAAE;IAEL,eAAe,UAAU,QAAgB;QACvC,IAAI,CAAC,MAAM,OAAO,aAAa,KAAK,GAAG,EAAE;QACzC,MAAM,MAAM,IAAA,qJAAsB,EAAC,KAAK,GAAG,EAAE;QAC7C,MAAM,IAAA,2KAAM,EAAC,IAAA,wKAAG,EAAC,4HAAE,EAAE,iBAAiB,MAAM;YAAE,SAAS;gBAAC,KAAK,GAAG;gBAAE;aAAS;QAAC,GAAG;YAAE,OAAO;QAAK;QAC7F,SAAS;IACX;IAEA,SAAS,SAAS,EAAW;QAC3B,OAAO,CAAC,CAAC,MAAM,MAAM,KAAK,QAAQ,cAAc;IAClD;IAEA,qBACE,8OAAC;QAAM,WAAU;;0BACf,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAG,WAAU;8BAA0E;;;;;;;;;;;0BAE1F,8OAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC,kBACV,8OAAC;wBAEC,SAAS,IAAM,UAAU,EAAE,GAAG;wBAC9B,WAAW,CAAC,gFAAgF,EAAE,gBAAc,EAAE,GAAG,GAAC,gBAAc,oBAAoB;;0CAEpJ,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,sIAAM;wCAAC,MAAM,EAAE,WAAW;wCAAE,KAAK,EAAE,QAAQ,IAAI;;;;;;kDAChD,8OAAC;wCAAK,WAAW,CAAC,yFAAyF,EAAE,SAAS,EAAE,QAAQ,IAAE,mBAAiB,eAAe;;;;;;;;;;;;0CAEpK,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDAAgC,EAAE,WAAW,IAAI,EAAE,KAAK;;;;;;kDACvE,8OAAC;wCAAI,WAAU;kDAA8C,EAAE,KAAK;;;;;;;;;;;;;uBAVjE,EAAE,GAAG;;;;;;;;;;;;;;;;AAiBtB","debugId":null}},
    {"offset": {"line": 354, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/JD/business-chat/src/components/MessageBubble.tsx"],"sourcesContent":["import { format } from \"date-fns\";\r\n\r\nexport function MessageBubble({ text, mine, ts, avatar }: { text: string; mine?: boolean; ts?: Date; avatar?: React.ReactNode }) {\r\n  return (\r\n    <div className={`flex items-end gap-2 ${mine ? \"justify-end\" : \"justify-start\"}`}>\r\n      {!mine && <div className=\"self-end\">{avatar}</div>}\r\n      <div className={`max-w-[72%] rounded-2xl px-4 py-2.5 ${mine ? \"bubble-me rounded-br-md\" : \"bubble-them rounded-bl-md\"}`}>\r\n        <p className=\"text-[15px] leading-relaxed\">{text}</p>\r\n        {ts && <div className={`mt-1 text-[11px] ${mine?\"text-white/80\":\"text-[var(--color-muted)]\"}`}>{format(ts, \"p\")}</div>}\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAAA;;;AAEO,SAAS,cAAc,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,EAAE,MAAM,EAAyE;IAC7H,qBACE,8OAAC;QAAI,WAAW,CAAC,qBAAqB,EAAE,OAAO,gBAAgB,iBAAiB;;YAC7E,CAAC,sBAAQ,8OAAC;gBAAI,WAAU;0BAAY;;;;;;0BACrC,8OAAC;gBAAI,WAAW,CAAC,oCAAoC,EAAE,OAAO,4BAA4B,6BAA6B;;kCACrH,8OAAC;wBAAE,WAAU;kCAA+B;;;;;;oBAC3C,oBAAM,8OAAC;wBAAI,WAAW,CAAC,iBAAiB,EAAE,OAAK,kBAAgB,6BAA6B;kCAAG,IAAA,+JAAM,EAAC,IAAI;;;;;;;;;;;;;;;;;;AAInH","debugId":null}},
    {"offset": {"line": 410, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/JD/business-chat/src/components/ChatWindow.tsx"],"sourcesContent":["\"use client\";\r\nimport * as React from \"react\";\r\nimport { Avatar } from \"./Avatar\";\r\nimport { MessageBubble } from \"./MessageBubble\";\r\nimport { addDoc, collection, limit, onSnapshot, orderBy, query, serverTimestamp } from \"firebase/firestore\";\r\nimport type { Message } from \"@/lib/types\";\r\nimport { db } from \"@/lib/firebase\";\r\nimport { useAuthState } from \"react-firebase-hooks/auth\";\r\nimport { auth } from \"@/lib/firebase\";\r\nimport { Send, LogOut } from \"lucide-react\";\r\n\r\nexport function ChatWindow({ otherUser }: { otherUser?: { uid: string; displayName: string; email: string; photoURL?: string } | null }) {\r\n  const [user] = useAuthState(auth);\r\n  const [text, setText] = React.useState(\"\");\r\nconst [messages, setMessages] = React.useState<Message[]>([]);\r\n\r\n  React.useEffect(() => {\r\n    if (!user?.uid || !otherUser?.uid) return;\r\n    const cid = [user.uid, otherUser.uid].sort().join(\"__\");\r\n    const q = query(collection(db, \"conversations\", cid, \"messages\"), orderBy(\"createdAt\", \"asc\"), limit(200));\r\nconst unsub = onSnapshot(q, (snap) => setMessages(snap.docs.map((d) => ({ id: d.id, ...(d.data() as Omit<Message, 'id'>) }))));\r\n    return () => unsub();\r\n  }, [user?.uid, otherUser?.uid]);\r\n\r\n  async function send() {\r\n    const trimmed = text.trim();\r\n    if (!trimmed || !user?.uid || !otherUser?.uid) return;\r\n    const cid = [user.uid, otherUser.uid].sort().join(\"__\");\r\n    await addDoc(collection(db, \"conversations\", cid, \"messages\"), {\r\n      text: trimmed,\r\n      senderId: user.uid,\r\n      createdAt: serverTimestamp(),\r\n    });\r\n    setText(\"\");\r\n  }\r\n\r\n  return (\r\n    <section className=\"flex flex-1 flex-col\">\r\n      {/* Top bar */}\r\n      <div className=\"flex items-center gap-3 border-b border-white/5 p-4\">\r\n        {otherUser ? (\r\n          <>\r\n            <Avatar name={otherUser.displayName} src={otherUser.photoURL} />\r\n            <div className=\"min-w-0\">\r\n              <div className=\"truncate font-medium\">{otherUser.displayName || otherUser.email}</div>\r\n              <div className=\"truncate text-xs text-[var(--color-muted)]\">{otherUser.email}</div>\r\n            </div>\r\n            <div className=\"ml-auto\">\r\n              <form action={() => auth.signOut()}>\r\n                <button type=\"submit\" className=\"btn-ghost\"><LogOut size={18}/> Logout</button>\r\n              </form>\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <div className=\"text-sm text-[var(--color-muted)]\">Select a contact to start chatting</div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Messages */}\r\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-3 scroll-gradient\">\r\n        {messages.map((m) => (\r\n          <MessageBubble key={m.id} text={m.text} mine={m.senderId===user?.uid} ts={m.createdAt?.toDate?.()} avatar={<Avatar name={otherUser?.displayName} src={otherUser?.photoURL} size={28} />} />\r\n        ))}\r\n      </div>\r\n\r\n      {/* Input */}\r\n      <div className=\"p-3 border-t border-white/5\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <input\r\n            value={text}\r\n            onChange={(e) => setText(e.target.value)}\r\n            onKeyDown={(e)=>{ if(e.key==='Enter' && !e.shiftKey){ e.preventDefault(); send(); } }}\r\n            placeholder=\"Type a message\"\r\n            className=\"input\"\r\n          />\r\n<button onClick={send} className=\"btn\" aria-label=\"Send\"><Send size={18}/></button>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 638, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/JD/business-chat/src/app/chat/page.tsx"],"sourcesContent":["\"use client\";\r\nimport * as React from \"react\";\r\nimport { useAuthState } from \"react-firebase-hooks/auth\";\r\nimport { auth, db } from \"@/lib/firebase\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { Sidebar } from \"@/components/Sidebar\";\r\nimport { ChatWindow } from \"@/components/ChatWindow\";\r\nimport { doc, onSnapshot, serverTimestamp, setDoc } from \"firebase/firestore\";\r\nimport type { UserDoc } from \"@/lib/types\";\r\n\r\nexport default function ChatPage() {\r\n  const [user, loading] = useAuthState(auth);\r\n  const router = useRouter();\r\nconst [selectedUid, setSelectedUid] = React.useState<string | null>(null);\r\nconst [otherUser, setOtherUser] = React.useState<UserDoc | null>(null);\r\n\r\n  React.useEffect(() => {\r\n    if (!loading && !user) router.replace(\"/auth\");\r\n  }, [user, loading, router]);\r\n\r\n  // Presence: update lastSeen periodically\r\n  React.useEffect(() => {\r\n    if (!user?.uid) return;\r\n    const update = () => setDoc(\r\n      doc(db, \"users\", user.uid),\r\n      { lastSeen: Date.now(), updatedAt: serverTimestamp() },\r\n      { merge: true }\r\n    );\r\n    update();\r\n    const id = setInterval(update, 30_000);\r\n    const vis = () => { if (document.visibilityState === \"visible\") update(); };\r\n    document.addEventListener(\"visibilitychange\", vis);\r\n    return () => { clearInterval(id); document.removeEventListener(\"visibilitychange\", vis); };\r\n  }, [user?.uid]);\r\n\r\n  React.useEffect(() => {\r\n    if (!selectedUid) { setOtherUser(null); return; }\r\nconst unsub = onSnapshot(doc(db, \"users\", selectedUid), (snap) => setOtherUser(snap.data() as UserDoc));\r\n    return () => unsub();\r\n  }, [selectedUid]);\r\n\r\n  if (!user) return null;\r\n\r\n  return (\r\n    <div className=\"min-h-dvh flex\">\r\n      <Sidebar onSelect={setSelectedUid} selectedUid={selectedUid} />\r\n      <main className=\"flex-1 flex flex-col\">\r\n        {!selectedUid ? (\r\n          <div className=\"flex-1 grid place-items-center p-6\">\r\n            <div className=\"text-center text-[var(--color-muted)]\">\r\n              <div className=\"text-xl font-semibold\">Welcome, {user.displayName || user.email}</div>\r\n              <div className=\"mt-1\">Select a contact to start chatting</div>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <ChatWindow otherUser={otherUser} />\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAPA;;;;;;;;;AAUe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,0LAAY,EAAC,8HAAI;IACzC,MAAM,SAAS,IAAA,+IAAS;IAC1B,MAAM,CAAC,aAAa,eAAe,GAAG,iNAAc,CAAgB;IACpE,MAAM,CAAC,WAAW,aAAa,GAAG,iNAAc,CAAiB;IAE/D,kNAAe,CAAC;QACd,IAAI,CAAC,WAAW,CAAC,MAAM,OAAO,OAAO,CAAC;IACxC,GAAG;QAAC;QAAM;QAAS;KAAO;IAE1B,yCAAyC;IACzC,kNAAe,CAAC;QACd,IAAI,CAAC,MAAM,KAAK;QAChB,MAAM,SAAS,IAAM,IAAA,2KAAM,EACzB,IAAA,wKAAG,EAAC,4HAAE,EAAE,SAAS,KAAK,GAAG,GACzB;gBAAE,UAAU,KAAK,GAAG;gBAAI,WAAW,IAAA,oLAAe;YAAG,GACrD;gBAAE,OAAO;YAAK;QAEhB;QACA,MAAM,KAAK,YAAY,QAAQ;QAC/B,MAAM,MAAM;YAAQ,IAAI,SAAS,eAAe,KAAK,WAAW;QAAU;QAC1E,SAAS,gBAAgB,CAAC,oBAAoB;QAC9C,OAAO;YAAQ,cAAc;YAAK,SAAS,mBAAmB,CAAC,oBAAoB;QAAM;IAC3F,GAAG;QAAC,MAAM;KAAI;IAEd,kNAAe,CAAC;QACd,IAAI,CAAC,aAAa;YAAE,aAAa;YAAO;QAAQ;QACpD,MAAM,QAAQ,IAAA,+KAAU,EAAC,IAAA,wKAAG,EAAC,4HAAE,EAAE,SAAS,cAAc,CAAC,OAAS,aAAa,KAAK,IAAI;QACpF,OAAO,IAAM;IACf,GAAG;QAAC;KAAY;IAEhB,IAAI,CAAC,MAAM,OAAO;IAElB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,wIAAO;gBAAC,UAAU;gBAAgB,aAAa;;;;;;0BAChD,8OAAC;gBAAK,WAAU;0BACb,CAAC,4BACA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;oCAAwB;oCAAU,KAAK,WAAW,IAAI,KAAK,KAAK;;;;;;;0CAC/E,8OAAC;gCAAI,WAAU;0CAAO;;;;;;;;;;;;;;;;yCAI1B,8OAAC,8IAAU;oBAAC,WAAW;;;;;;;;;;;;;;;;;AAKjC","debugId":null}}]
}