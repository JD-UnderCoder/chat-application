(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,79474,(e,t,a)=>{"use strict";var s=e.r(71645).__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;a.c=function(e){return s.H.useMemoCache(e)}},932,(e,t,a)=>{"use strict";t.exports=e.r(79474)},16518,e=>{"use strict";var t=e.i(43476),a=e.i(932),s=e.i(9375),i=e.i(59141),l=e.i(18566),n=e.i(71645);e.i(51718);var r=e.i(18357);e.i(36180);var c=e.i(98925);function u(){let[e,a]=n.useState("signin"),[s,l]=n.useState(""),[u,o]=n.useState(""),[d,m]=n.useState(""),[h,p]=n.useState(!1),[x,g]=n.useState(null);async function N(t){t.preventDefault(),g(null),p(!0);try{if("signup"===e){let e=await (0,r.createUserWithEmailAndPassword)(i.auth,s,u);d&&await (0,r.updateProfile)(e.user,{displayName:d}),await (0,c.setDoc)((0,c.doc)(i.db,"users",e.user.uid),{uid:e.user.uid,email:s,displayName:d||s.split("@")[0],photoURL:e.user.photoURL||null,lastSeen:Date.now(),createdAt:(0,c.serverTimestamp)()})}else await (0,r.signInWithEmailAndPassword)(i.auth,s,u)}catch(e){g(e instanceof Error?e.message:"Something went wrong")}finally{p(!1)}}return(0,t.jsxs)("div",{className:"card card-hover w-full max-w-md p-6",children:[(0,t.jsxs)("div",{className:"mb-6 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-emerald-400 to-emerald-600 text-white grid place-items-center shadow",children:(0,t.jsx)("span",{className:"text-sm font-bold",children:"BC"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Welcome"}),(0,t.jsx)("p",{className:"text-sm text-[var(--color-muted)]",children:"Sign in to your account"})]})]}),(0,t.jsxs)("form",{onSubmit:N,className:"space-y-3",children:["signup"===e&&(0,t.jsx)("input",{className:"input",placeholder:"Full name",value:d,onChange:e=>m(e.target.value)}),(0,t.jsx)("input",{className:"input",placeholder:"Email",type:"email",value:s,onChange:e=>l(e.target.value)}),(0,t.jsx)("input",{className:"input",placeholder:"Password",type:"password",value:u,onChange:e=>o(e.target.value)}),x&&(0,t.jsx)("p",{className:"text-sm text-red-400",children:x}),(0,t.jsx)("button",{className:"btn w-full",disabled:h,children:h?"Please wait...":"signup"===e?"Create account":"Sign in"})]}),(0,t.jsx)("div",{className:"mt-4 text-center text-sm text-[var(--color-muted)]",children:"signup"===e?(0,t.jsx)("button",{className:"btn-ghost",onClick:()=>a("signin"),children:"Have an account? Sign in"}):(0,t.jsx)("button",{className:"btn-ghost",onClick:()=>a("signup"),children:"New here? Create an account"})})]})}function o(){let e,r,o,d=(0,a.c)(6),[m,h]=(0,s.useAuthState)(i.auth),p=(0,l.useRouter)();return d[0]!==h||d[1]!==p||d[2]!==m?(e=()=>{!h&&m&&((0,c.setDoc)((0,c.doc)(i.db,"users",m.uid),{uid:m.uid,email:m.email,displayName:m.displayName||m.email?.split("@")[0],photoURL:m.photoURL||null,lastSeen:Date.now(),updatedAt:(0,c.serverTimestamp)()},{merge:!0}),p.replace("/chat"))},r=[m,h,p],d[0]=h,d[1]=p,d[2]=m,d[3]=e,d[4]=r):(e=d[3],r=d[4]),(0,n.useEffect)(e,r),d[5]===Symbol.for("react.memo_cache_sentinel")?(o=(0,t.jsx)("div",{className:"min-h-dvh grid place-items-center p-6",children:(0,t.jsx)(u,{})}),d[5]=o):o=d[5],o}e.s(["default",()=>o],16518)}]);